<template>
  <div class="container">
    <div class="login-card">
      <div class="login-card-left"></div>
      <div class="login-card-right">
        <div class="login-right-wrapper">
          <div class="login-right-title">后台管理系统</div>
          <el-form ref="loginFormRef" v-model="loginForm">
            <el-form-item>
              <el-input v-model="loginForm.username" placeholder="请输入账户">
                <template #prefix>
                  <el-icon class="el-input__icon"></el-icon>
                </template>
              </el-input>
            </el-form-item>
            <el-form-item>
              <el-input v-model="loginForm.password" placeholder="请输入密码">
                <template #prefix>
                  <el-icon class="el-input__icon"><search /></el-icon>
                </template>
              </el-input>
            </el-form-item>

            <el-form-item>
              <el-button type="primary" @click="handleLogin">登陆</el-button>
            </el-form-item>
          </el-form>
        </div>
      </div>
    </div>
  </div>
</template>
<script setup lang="ts">
import { login } from "@/apis/login"
import md5 from "js-md5"

const loginForm = reactive({
  username: "admin",
  password: "hfm@admin",
})
const loginFormRef = ref()

const baseParams = {
  tenantId: "000000",
  grant_type: "password",
  scope: "all",
  type: "account",
}

const handleLogin = async () => {
  const params = { ...loginForm, ...baseParams }
  params.password = md5(params.password)
  const res = await login(params)
  console.log("res :>> ", res)
}
</script>

<style lang="scss" scoped>
.container {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  background: url("@/assets/images/login_bg.png");
}

.login-card {
  width: 960px;
  height: 445px;
  display: flex;
  background-color: #fff;
  border-radius: 6px;
  overflow: hidden;

  &-left {
    flex: 0 0 50%;
    background: url("@/assets/images/login_form_bg.png") center/cover no-repeat;
  }

  &-right {
    flex: 0 0 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .login-right-wrapper {
    width: 300px;

    &::v-deep(.el-form-item) {
      margin-bottom: 28px;

      .el-button {
        width: 100%;
      }
    }
  }

  .login-right-title {
    text-align: center;
    margin-bottom: 44px;
  }
}
</style>
